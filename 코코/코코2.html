<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>무게당 금액 계산기</title>
<style>
  .selected {
    background-color: lightblue;
  }
  #result2 {margin-top:50px;}
  #result2 div {margin-top:10px;}
</style>
</head>
<body>
<h2>무게당 금액 계산기</h2>
<label for="totalWeight">총 무게:</label>
<input type="number" id="totalWeight" placeholder="총 무게를 입력하세요">
<input type="number" id="price" placeholder="총 금액을 입력하세요">
<div>
  <label>무게 단위:</label>
  <button onclick="selectWeightUnit('g')" id="gButton" class="selected">g</button>
  <button onclick="selectWeightUnit('kg')" id="kgButton">kg</button>
</div>
<br>
<label for="price">총 금액:</label>

<br>
<div id="unitButtons">
  <label>일정 무게:</label>
  <button onclick="selectUnitWeight(10)" id="10gButton">10g</button>
  <button onclick="selectUnitWeight(100)" id="100gButton" class="selected">100g</button>
</div>
<br>
<div>
  <button id="print">계산하기</button>
</div>
<br>
<div id="result"></div>
<div id="result2"></div>
<script>
let selectedUnitWeight = 100;
let selectedWeightUnit = 'g';

function selectUnitWeight(unit) {
  selectedUnitWeight = unit;
  updateSelectedUnitButton();
  calculatePricePerUnit();
}

function updateSelectedUnitButton() {
  const buttons = document.querySelectorAll('#unitButtons button');
  buttons.forEach(button => {
    if (parseInt(button.innerText) === selectedUnitWeight) {
      button.classList.add('selected');
    } else {
      button.classList.remove('selected');
    }
  });
}

function selectWeightUnit(unit) {
  selectedWeightUnit = unit;
  updateSelectedWeightUnitButton();
  calculatePricePerUnit();
}

function updateSelectedWeightUnitButton() {
  const gButton = document.getElementById('gButton');
  const kgButton = document.getElementById('kgButton');
  
  if (selectedWeightUnit === 'g') {
    gButton.classList.add('selected');
    kgButton.classList.remove('selected');
  } else {
    kgButton.classList.add('selected');
    gButton.classList.remove('selected');
  }
}

function calculatePricePerUnit() {
  var totalWeight = parseFloat(document.getElementById('totalWeight').value);
  var price = parseFloat(document.getElementById('price').value);

  // g로 통일해서 계산
  if (selectedWeightUnit === 'kg') {
    totalWeight *= 1000; // kg를 g로 변환
  }

  var pricePerUnit = price / (totalWeight / selectedUnitWeight);
  console.log(selectedUnitWeight, pricePerUnit)
  document.getElementById('result').innerText = selectedUnitWeight+'g 당 ' + pricePerUnit.toLocaleString() + '원';
}

document.getElementById('totalWeight').addEventListener('input', calculatePricePerUnit);
document.getElementById('price').addEventListener('input', calculatePricePerUnit);

// 페이지 로드 시 초기 버튼 상태 설정
updateSelectedWeightUnitButton();

document.getElementById('print').addEventListener('click', function() {
    var resultDiv = document.createElement('div');
    resultDiv.textContent = document.getElementById('result').innerText;
    resultDiv.textContent += '(' + document.getElementById('totalWeight').value + ')'
    document.getElementById('result2').appendChild(resultDiv);
    console.log(parseFloat(document.getElementById('totalWeight').value))
})
</script>
</body>
</html>
