<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Chips Wrap Example</title>
<style>
body {
    font-family: sans-serif;
    padding: 20px;
}

/* ì¹©ìŠ¤ ì»¨í…Œì´ë„ˆ */
.chips-container {
    display: flex;
    overflow-x: auto;
    gap: 8px;
    scroll-behavior: smooth;
    padding-bottom: 5px;
}

/* ì¹© ìŠ¤íƒ€ì¼ */
.chip {
    flex: 0 0 auto;
    padding: 8px 12px;
    background: #ddd;
    border-radius: 20px;
    white-space: nowrap;
}

/* ì„¸ë¡œ ë³´ê¸° ëª¨ë“œ */
.chips-wrap.vertical .chips-container {
    flex-wrap: wrap;
    overflow-x: hidden;
}

/* ìŠ¤í¬ë¡¤ ë ìƒíƒœ */
.chips-wrap.scroll-end {
    background-color: #f5f5f5; /* ì˜ˆì‹œ */
}

/* í† ê¸€ ë²„íŠ¼ */
.toggle-btn {
    margin-top: 5px;
}
.toggle-btn.hidden {
    display: none;
}
</style>
</head>
<body>

<h2>ğŸ“Œ ì¹©ìŠ¤ê°€ ë§ì€ ê²½ìš° (ìŠ¤í¬ë¡¤ O)</h2>
<div class="chips-wrap">
    <div class="chips-container">
        <div class="chip">ì¹©1</div>
        <div class="chip">ì¹©2</div>
        <div class="chip">ì¹©3</div>
        <div class="chip">ì¹©4</div>
        <div class="chip">ì¹©5</div>
        <div class="chip">ì¹©6</div>
        <div class="chip">ì¹©7</div>
        <div class="chip">ì¹©8</div>
        <div class="chip">ì¹©9</div>
        <div class="chip">ì¹©10</div>
    </div>
    <button class="toggle-btn">í† ê¸€</button>
</div>

<h2>ğŸ“Œ ì¹©ìŠ¤ê°€ ì ì€ ê²½ìš° (ìŠ¤í¬ë¡¤ X)</h2>
<div class="chips-wrap">
    <div class="chips-container">
        <div class="chip">A</div>
        <div class="chip">B</div>
        <div class="chip">C</div>
    </div>
    <button class="toggle-btn">í† ê¸€</button>
</div>

<script>
function initChipsWrap(wrap) {
    const container = wrap.querySelector('.chips-container');
    const toggleBtn = wrap.querySelector('.toggle-btn');

    // í† ê¸€ ë²„íŠ¼ í´ë¦­ â†’ vertical í´ë˜ìŠ¤ í† ê¸€
    toggleBtn.addEventListener('click', () => {
        wrap.classList.toggle('vertical');
    });

    // ìŠ¤í¬ë¡¤ ë ê°ì§€
    const checkScrollEnd = () => {
        const isEnd = Math.ceil(container.scrollLeft + container.clientWidth) >= container.scrollWidth;
        wrap.classList.toggle('scroll-end', isEnd);
    };

    // í† ê¸€ ë²„íŠ¼ ë…¸ì¶œ ì—¬ë¶€ ì²´í¬
    const checkToggleVisibility = () => {
        const hasScroll = container.scrollWidth > container.clientWidth;
        toggleBtn.classList.toggle('hidden', !hasScroll);
    };

    const updateState = () => {
        checkScrollEnd();
        checkToggleVisibility();
    };

    container.addEventListener('scroll', checkScrollEnd);
    window.addEventListener('resize', updateState);

    // ì¹©ìŠ¤ ë™ì  ì¶”ê°€/ì œê±° ê°ì§€
    const observer = new MutationObserver(updateState);
    observer.observe(container, { childList: true, subtree: true });

    updateState();
}

// ì´ˆê¸° ë¡œë“œ ì‹œ ëª¨ë“  ë© ì´ˆê¸°í™”
document.querySelectorAll('.chips-wrap').forEach(initChipsWrap);

// chips-wrap ìì²´ ë™ì  ìƒì„± ê°ì§€
const wrapObserver = new MutationObserver((mutations) => {
    mutations.forEach((mutation) => {
        mutation.addedNodes.forEach((node) => {
            if (node.classList && node.classList.contains('chips-wrap')) {
                initChipsWrap(node);
            }
        });
    });
});
wrapObserver.observe(document.body, { childList: true, subtree: true });
</script>

</body>
</html>