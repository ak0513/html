<!DOCTYPE html>
<html lang="kr">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/ScrollTrigger.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.11.5/TextPlugin.min.js"></script>
    
    <script src="./GSDevTools.js"></script>
    <title>gsap</title>
</head>

<body>
    <style>
        body {
            min-height: 500vh;
            margin: 0;
            padding:0 24px;
            background-color: #111;
            background-image:
                linear-gradient(rgba(255, 255, 255, .07) 2px, transparent 2px),
                linear-gradient(90deg, rgba(255, 255, 255, .07) 2px, transparent 2px),
                linear-gradient(rgba(255, 255, 255, .06) 1px, transparent 1px),
                linear-gradient(90deg, rgba(255, 255, 255, .06) 1px, transparent 1px);
            background-size: 100px 100px, 100px 100px, 20px 20px, 20px 20px;
            background-position: -2px -2px, -2px -2px, -1px -1px, -1px -1px;
            overflow-x: hidden;
        }

        * {
            box-sizing: border-box;
            color: #999
        }

        h1 {
            color: #eee;
            margin-top: 100px;
        }

        button {
            padding: 4px 10px;
            color: #333;
            cursor: pointer;
        }

        .box {
            background-color: gray;
            width: 100px;
            height: 100px;
            padding: 10px;
            color: rgba(255, 255, 255, 0.5);
        }

        .flex {display: flex; gap:30px;}

        .mgt10 {
            margin-top: 10px;
        }

        .mgt30 {
            margin-top: 30px;
        }

        .orange {background-color: orange;}
        .green {background-color: green;}
        .pink {background-color: pink;}
        .blue {background-color: blue;}

        .box+.box {
            margin-top: 20px;
        }

        .flex .box+.box {
            margin-top: 0;
        }

        .gsap0301>div {
            display: inline-block;
            font-size: 30px;
        }

        .gsap0401>div {
            display: inline-block;
            font-size: 30px;
        }

        .gsap0402>div {
            display: inline-block;
            font-size: 20px;
        }

        .gsap11>div {padding:0;}

        .gsap1201 {text-align: center;}
        .gsap1201>div {
            display: inline-block;
            font-size: 20px;
        }

        .gsap13 {position: relative; perspective: 400px;}
        .gsap13 > div {position: absolute;top:50%;left:50%;font-size:20px;}

        .gsap14 {display: grid;grid-template-columns:repeat(13, 1fr);grid-template-rows: repeat(8, 1fr);gap:10px;width:650px;}
        .gsap14 > .box {width:50px;height:50px;}
        .gsap14 > .box + .box {margin:0;}

        .gsap15 {display: grid;grid-template-columns:repeat(13, 1fr);grid-template-rows: repeat(2, 1fr);gap:10px;width:650px;}
        .gsap15 > .box {width:50px;height:50px;}
        .gsap15 > .box + .box {margin:0;}

        .gsap20{
            text-align: center;
            color: #fff;
            font-size: 2rem;
        }

        .gsap20 .textField{
            display: flex;
            align-items: center;
            justify-content: center;
        }
        .gsap20 .big{
            margin: 0;
            min-height: 80px;
            text-transform: uppercase;
            color:#fff;
            font-size:4rem;
        }

        .gsap20 .old{
            color:red;
        }

        .gsap20 .new{
            color: #fff;
        }

        .gsap20 .cursor{
            display: inline-block;
            height: 60px;
            width: 5px;
            background: #fff;
            position: relative;
            top: -10px;
            left: 10px;
        }
    </style>

    <h1># gsap01</h1>
    <div class="gsap01">
        <div class="box gsap0101">gsap0101</div>
        <div class="box gsap0102">gsap0102</div>
        <div class="box gsap0103">gsap0103</div>

        <div class="mgt10">
            <button class="btn-gsap0101">play</button>
            <button class="btn-gsap0102">pause</button>
            <button class="btn-gsap0103">reverse</button>
        </div>
    </div>

    <h1># gsap02</h1>
    <div class="gsap02">
        <div class="box gsap0201">gsap0201</div>
        <div class="box gsap0202">gsap0202</div>

        <div class="mgt10">
            <button class="btn-gsap0201">kill</button>
        </div>
    </div>

    <h1># gsap03</h1>
    <div class="gsap03">
        <h2 class="gsap0301">
            <div>L</div>
            <div>e</div>
            <div>a</div>
            <div>r</div>
            <div>n</div>
            <div>i</div>
            <div>n</div>
            <div>g</div>
        </h2>
    </div>


    <h1># gsap04</h1>
    <div class="gsap04">
        <h2 class="gsap0401">
            <div>L</div>
            <div>e</div>
            <div>a</div>
            <div>r</div>
            <div>n</div>
            <div>i</div>
            <div>n</div>
            <div>g</div>
        </h2>
        <h2 class="gsap0402">
            <div>R</div>
            <div>e</div>
            <div>s</div>
            <div>i</div>
            <div>g</div>
            <div>t</div>
            <div>e</div>
            <div>r</div>
            <div>E</div>
            <div>f</div>
            <div>f</div>
            <div>e</div>
            <div>c</div>
            <div>t</div>
        </h2>
    </div>


    <h1># gsap05</h1>
    <div class="gsap05">
        <div class="gsap0501">Click</div>
        <div class="gsap0501">Click</div>
        <div class="gsap0501">Click</div>
        <div class="gsap0501">Click</div>
        <div class="gsap0501">Click</div>
      
        <button id="reset">reset</button>
    </div>

    <h1># gsap06</h1>
    <div class="gsap06">
        <div class="gsap0601 box"></div>
    </div>


    <h1># gsap07</h1>
    <div class="gsap07 flex">
        <div class="gsap0701 box">gsap0701</div>
        <div class="gsap0702 box">gsap0702</div>
        <div class="gsap0703 box">gsap0703</div>
    </div>

    <h1># gsap08</h1>
    <div class="gsap08 flex">
        <div class="gsap0801 box orange"></div>
        <div class="gsap0802 box"></div>
        <div class="gsap0803 box orange"></div>
    </div>

    <h1># gsap09</h1>
    <div class="gsap09 flex">
        <div class="gsap0901 box orange"></div>
        <div class="gsap0902 box"></div>
        <div class="gsap0903 box orange"></div>
    </div>

    <h1># gsap10</h1>
    <div class="gsap10 flex">
        <div class="gsap1001 box"></div>
        <div class="gsap1002 box"></div>
        <div class="gsap1003 box"></div>
        <div class="gsap1004 box"></div>
        <div class="gsap1005 box"></div>
        <div class="gsap1006 box"></div>
        <div class="gsap1007 box"></div>
        <div class="gsap1008 box"></div>
    </div>

    <h1># gsap11</h1>
    <div class="gsap11 flex">
        <div class="gsap1101 box"></div>
        <div class="gsap1102 box"></div>
        <div class="gsap1103 box"></div>
        <div class="gsap1104 box"></div>
        <div class="gsap1105 box"></div>
        <div class="gsap1106 box"></div>
        <div class="gsap1107 box"></div>
        <div class="gsap1108 box"></div>
        <div class="gsap1108 box"></div>
        <div class="gsap1108 box"></div>
    </div>

    <h1># gsap12</h1>
    <div class="gsap12">
        <h2 class="gsap1201">
            <div>L</div>
            <div>e</div>
            <div>a</div>
            <div>r</div>
            <div>n</div>
            <div>i</div>
            <div>n</div>
            <div>g</div>
        </h2>
    </div>

    <h1># gsap13</h1>
    <div class="gsap13">
        <div>checkPrefix()</div>
        <div>clamp()</div>
        <div>distribute()</div>
        <div>getUnit()</div>
    </div>

    <h1># gsap14</h1>
    <div class="gsap14"></div>


    <h1># gsap15</h1>
    <div class="gsap15"></div>

    <h1># gsap16</h1>
    <div class="gsap16">
        <div class="flex">
            <div class="box orange" data-name="a0"></div>
            <div class="box green" data-name="a1"></div>
            <div class="box pink" data-name="a2"></div>
            <div class="box blue" data-name="a3"></div>
        </div>

          <div class="nav mgt10">
            <button id="prev">←</button>
            <button id="next">→</button>
          </div>

          <div class="nav mgt10">
            <button id="orange">orange</button>
            <button id="green">green</button>
            <button id="pink">pink</button>
            <button id="blue">blue</button>
          </div>
    </div>

    <h1># gsap17</h1>
    <div class="gsap17">
        <div class="box orange"></div>
        <div class="box blue"></div>
    </div>

    <h1># gsap18</h1>
    <div class="gsap18 flex">
        <div class="box orange"></div>
        <div class="box blue"></div>
        <div class="box pink"></div>
        <div class="box green"></div>
        <div class="quote">quote</div>
    </div>


    <h1># gsap19</h1>
    <div class="gsap19 flex">
        <div class="box orange"></div>
        <div class="box blue"></div>
        <div class="box pink"></div>
        <div class="box green"></div>
        <div class="quote">quote</div>
    </div>

    <h1># gsap20</h1>
    <div class="gsap20">
        <div>I'M</div>
        <div class="textField">
            <div class="big"></div>
            <div class="cursor"></div>
        </div>
        <div class="developer">DEVELOPER</div>
    </div>


    <script>
        scrollTo(0,4500)


        const { wrap, toArray, wrapYoyo } = gsap.utils;

        /* gsap01 */
        function gsap01() {
            const pixelPerSecond = 200;
            const animation = gsap.timeline();
            animation.to('.gsap0101', { duration: 1, x: 300 })
                .to('.gsap0102', { duration: 3, x: 200 })
                .to('.gsap0103', { duration: 1, x: 400 })

            const children = animation.getChildren();
            console.group('gsap01')
            console.log(children)
            console.groupEnd()

            document.querySelector('.btn-gsap0101').addEventListener('click', () => { animation.play() })
            document.querySelector('.btn-gsap0102').addEventListener('click', () => { animation.pause() })
            document.querySelector('.btn-gsap0103').addEventListener('click', () => { animation.reverse() })
        }
        gsap01();


        /* gsap02 트윈 죽이기 */
        function gsap02() {
            gsap.to('.gsap0201, .gsap0202', {
                x: 200,
                // rotation:360,
                repeat: -1, // 정의된 수만큼 반복,  -1은 무한 반복
                ease: 'linear',
                scale: 0.8,
                duration: 1.5,
                yoyo: true,
            })

            document.querySelector('.btn-gsap0201').addEventListener('click', () => {
                gsap.killTweensOf('.gsap0201')
            })
        }
        gsap02();


        /* gsap03 utils 메서드 */
        function gsap03() {
            // const { wrap,toArray,wrapYoyo } = gsap.utils;
            // const list = document.querySelector('.gsap0301').children
            const list = gsap.utils.toArray('.gsap0301 > div');
            const tl = gsap.timeline();

            gsap.to('.gsap0301', { autoAlpha: 0.8 })
            tl.from(list, {
                y: wrap([100, -100]),
                opacity: 0,
                stagger: {
                    each: 0.1, // 각 항목별 딜레이 0.1s
                    from: 'random', // stagger가 시작되는 위치 (start, center, edges, random, end)
                    // amount: 1, // 전체 시간 1s
                },
            }).to(list, {
                x: 5,
                y: wrap([-10, 10, -10, 20, 10, -10]),
                color: wrap(['red', '#b1bb21']),
                stagger: {
                    // each:0.1,
                    from: 'edges',
                    amount: 2,
                }
            })
        }
        gsap03();


        /* gsap04 효과 등록하기 */
        function gsap04() {
            gsap.set('.gsap04', { autoAlpha: 1 })
            gsap.registerEffect({
                name: 'customEffect',
                extendTimeline: true, // 타임라인 확장 여부
                defaults: {
                    y: -15,
                    colors: ['red', 'orange']
                },
                effect: (target, config) => {
                    const list = gsap.utils.toArray(target);
                    const tl = gsap.timeline();
                    tl.from(list, { y: config.y, opacity: 0, stagger: 0.05 })
                        .to(list, { color: gsap.utils.wrap(config.colors) })
                    return tl;
                }
            })

            const animation = gsap.timeline();
            animation.customEffect('.gsap0401 > div') // 효과는 defaults 에 있는 값 적용
                .customEffect('.gsap0402 > div', { y: 'random(-10,10)', colors: ['blue', 'green'] }) // 효과 개별로 적용
        }
        gsap04();


        /* gsap05 CSS 플러그인 clearProps */
        function gsap05() {
            const list = gsap.utils.toArray('.gsap0501');
            list.forEach((item) => {
                item.addEventListener('click', (e) => {
                    gsap.to(e.currentTarget, {
                        backgroundColor: 'gray',
                        width: '10%',
                        x: 200,
                        scale: 0.3,
                    })
                })
            })

            document.querySelector('#reset').addEventListener('click', () => {
                gsap.set('.gsap0501', { clearProps: 'width'})
                // gsap.set('.gsap0501', { clearProps: 'x'})
            })
        }
        gsap05();


        /* gsap06 3D transform */
        function gsap06() {
            gsap.set('.gsap0601',{transformPerspective:600})
            gsap.to('.gsap0601',{
                rotationY:360,
                duration:3,
                ease:'none',
                transformOrigin:'50% 50% 400'
            })
        }
        gsap06();


        /* gsap07 런타임 랜더링 immediateRender */
        function gsap07() {
            const tl = gsap.timeline({
                defaults: {
                    duration: 1
                }
            });

            tl.from('.gsap0701', { opacity: 0, y: 50 ,duration: 0.2}) //  0 -> 1
            .from('.gsap0702', { opacity: 0, y: -50 })
            .from('.gsap0703', { opacity: 0, scale: 1.2 })
            .from('.gsap0701', {  y: -50, immediateRender: false }) // true면 초기값에서 시작, false면 마지막 상태에서 시작
            .from('.gsap0702', { y: -100, immediateRender: true,duration:10 }) // true면 초기값에서 시작, false면 마지막 상태에서 시작

            GSDevTools.create()
            // GSDevTools.create({animation:tl})
        }
        gsap07();


        /* gsap08 함수기반 애니메이션 1 */
        function gsap08() {
            gsap.to('.gsap08 .box', {
                rotation: (i, t) => {
                    if (t.classList.contains('orange')) {
                        return -360
                    }
                    return 360
                },
                duration: (i, t) => {
                    if (t.classList.contains('orange')) {
                        return 0.5
                    }
                    return 1
                },
                repeat: 1,
                ease: 'none',
                stagger: 0.1
            })
        }
        gsap08();

        /* gsap09 함수기반 애니메이션 2 */
        function gsap09() {
            gsap.to('.gsap09 .box', {
                y: custom,
                x: custom,
                rotation: (i, t) => {
                    if (t.classList.contains('orange')) {
                        return 0
                    }
                    return 360
                },
                stagger: 0.3
            });

            function custom(i, t, arr) {
                // console.log(i, t, arr)
                if (t.classList.contains('orange')) {
                    return 0
                }
                return i * 30
            }
        }
        gsap09();

        /* gsap10 가속도 기반의 Stagger */
        function gsap10() {
            gsap.from('.gsap10 > div', {
                duration: 2,
                opacity: 0,
                scale: 0,
                ease: 'power3.inOut',
                stagger: {
                    each: 0.2,
                    ease: 'power3',
                    from: 'center'
                }
            })
        }
        gsap10();

        /* gsap11 유틸메서드 distribute */
        function gsap11() {
            const value = gsap.utils.distribute({
                base:0, // 시작되는 위치
                amount:50, // 요소 사이의 간격 - amount / (요소의 개수 - 1) = value
                // ease:'power3', // ease에 따라 value 값이 달라진다.
                // from:'center'
            })

            gsap.to('.gsap11 > div',{
                height:value,
                duration:2,
                stagger:{
                    each: 0.1,
                    // ease:'power3'
                    from:'center'
                },
            })
        }
        gsap11();


        /* gsap12 값 분배를 통한 애니메이션 distribute */
        function gsap12() {
            const chars = gsap.utils.toArray('.gsap1201 > div');
            const disX = gsap.utils.distribute({
                base: -300,
                amount: 600,
                // ease:'power2.inOut'
            })

            const tl = gsap.timeline({
                repeat: -1,
            });

            tl.from(chars, {
                y: gsap.utils.wrap([-10, 10, -50]),
                opacity: 0,
                filter: 'blur(10px)',
                stagger: {
                    each: 0.1,
                    from: 'center'
                }
            })
            .to(chars, {
                delay: 1,
                x: disX,
                duration: 3,
                ease: 'power3.inOut'
            })
            .to(chars, {
                delay: -1, // 애니메이션이 시작되기 1초 전으로 시간을 되돌린 후 애니메이션이 실행
                opacity: 0,
                filter: 'blur(10px)',
                stagger: {
                    each: 0.1,
                    from: 'edges'
                }
            })
        }
        gsap12();


        /* gsap13 3D 텍스트 효과 */
        function gsap13() {
        const duration = 0.2;
        const numberOfTargets = gsap.utils.toArray('.gsap13 > div').length
        const pause = 1.5;
        const stagger = duration + pause;
        const delay = stagger * (numberOfTargets - 1) + pause;

        const tl = gsap.timeline();

        gsap.set('.gsap13 > div',{transformOrigin:'50% 50% -50'})

        tl.from('.gsap13 > div',{
            rotationX:-90,
            rotationY:-50,
            opacity:0,
            duration:duration,
            stagger:{
                each:stagger,
                repeat:-1,
                repeatDelay:delay
            }
        })
        .to('.gsap13 > div',{
            rotationX:90,
            rotationY:50,
            opacity:0,
            duration:duration,
            stagger: {
                each:stagger,
                repeat:-1,
                repeatDelay:delay
            }
        },stagger)
        }
        gsap13();

        /* gsap14 */
        function gsap14() {
        const l = 8 * 13;

        for(let i = 0; i < l; i++){
            let template = `<div class="box" data-index="${i}"></div>`
            document.querySelector('.gsap14').insertAdjacentHTML('beforeend',template)
        }

        gsap.to('.gsap14 .box',{
            duration:1,
            scale:0.2,
            ease:'power1.inOut',
            stagger: {
                each:0.1,
                grid:[8,13],
                // axis:'y',
                from:'center',
                repeat:-1,
                yoyo:true,
            }
        })
        }
        gsap14();

    
        /* gsap15 콜백 안에서의 Stagger */
        function gsap15() {
        const l = 2 * 13;
        for(let i = 0; i < l; i++){
        let template = 
            `<div class="box"></div>`
            document.querySelector('.gsap15')?.insertAdjacentHTML('beforeend',template)
        }
        const tween = gsap.to('.gsap15 .box',{
            scale:0.3,
            stagger:{
                each:0.5,
                onStart(){
                    const target = this.targets()[0];
                    // console.log(target)
                    if(target.dataset.stop === 'stop'){
                        tween.pause(this.startTime())
                        // console.log( this.startTime() );
                    }
                }
            }
        })

        const stage = document.querySelector('.gsap15');
        stage.addEventListener('click',(e)=>{
            // console.log( e.target );
            if(e.target.matches('.gsap15 .box')){
                gsap.to(e.target,{
                    backgroundColor:'red',
                    attr:{
                        'data-stop':'stop',
                    }
                })
            }
        })
        }
        gsap15();


        /* gsap16 순차적, 비순차적 애니메이션 제어 */
        function gsap16() {
        const tl = gsap.timeline({
                defaults: {
                    scale: 0,
                    opacity: 0,
                    duration: 1
                }
            });
            tl.from('.gsap16 .box[data-name="a0"]', {})
                .addPause() // 일시정지 추가

                .from('.gsap16 .box[data-name="a1"]', { y: 100, rotation: 360 })
                .addPause()

                .from('.gsap16 .box[data-name="a2"]', { y: -100, rotation: 360 })
                .addPause()

                .from('.gsap16 .box[data-name="a3"]', { scale: 2, rotation: -360 })

            // 순차적
            const prev = document.querySelector('.gsap16 #prev');
            const next = document.querySelector('.gsap16 #next');
            prev.addEventListener('click', () => tl.reverse())
            next.addEventListener('click', () => tl.play())

            // 비순차적
            const orange = document.querySelector('.gsap16 #orange');
            const green = document.querySelector('.gsap16 #green');
            const pink = document.querySelector('.gsap16 #pink');
            const blue = document.querySelector('.gsap16 #blue');

            orange.addEventListener('click', () => gsap.to(tl,{time:1}))
            green.addEventListener('click', () => gsap.to(tl,{time:2}))
            pink.addEventListener('click', () => gsap.to(tl,{time:3}))
            blue.addEventListener('click', () => gsap.to(tl,{time:4}))
        }
        gsap16();


        /* gsap17 타임라인 자체를 멈추고 다시 재생 */
        function gsap17() {
            let tl = gsap.timeline()
            .to('.gsap17 .orange',{duration:2,x:300})
            .addPause('>',gsap.delayedCall,[2,()=> tl.play() ]) // 2초 후 재생
            .to('.gsap17 .blue',{duration:1,x:150})
        }
        gsap17();


        /* gsap18 타임라인 관리하기 */
        function gsap18() {
            const orange = document.querySelector('.gsap18 .orange')
            const blue = document.querySelector('.gsap18 .blue')
            const pink = document.querySelector('.gsap18 .pink')
            const green = document.querySelector('.gsap18 .green')
            const quote = document.querySelector('.gsap18 .quote')

            gsap.set([green,quote],{y:120})

            gsap.defaults({
                duration:1
            })

            // 동일 기능 실행
            // const orangeAnimation = gsap.timeline();
            // orangeAnimation.to(orange,{scale:2})
            // orangeAnimation.to(orange,{rotation:360})
            // orangeAnimation.to(orange,{scale:1})
            // orangeAnimation.to([green,quote],{y:0,stagger:0.2,repeat:1,yoyo:true,repeatDelay:1})

            const orangeAnimation = gsap.timeline()
            .to(orange,{scale:2})
            .to(orange,{rotation:360})
            .to(orange,{scale:1})
            .to([green,quote],{y:0,stagger:0.2,repeat:1,yoyo:true,repeatDelay:1}) // 대괄호로 중복 선택

            const blueAnimation = gsap.timeline()
            .to(blue,{y:150})
            .to(blue,{rotation:360})
            .to(blue,{y:0}) 
            .to([green,quote],{y:0,stagger:0.2,repeat:1,yoyo:true,repeatDelay:1})

            const pinkAnimation = gsap.timeline()
            .to(pink,{scale:0.5}) 
            .to(pink,{rotation:-360}) 
            .to(pink,{scale:1}) 
            .to([green,quote],{y:0,stagger:0.2,repeat:1,yoyo:true,repeatDelay:1})

            const master = gsap.timeline()
            .add(orangeAnimation)
            .add(blueAnimation)
            .add(pinkAnimation)
        }
        gsap18();


         /* gsap19 함수로 타임라인 관리하기 */
         function gsap19() {
            const orange = document.querySelector('.gsap19 .orange')
            const blue = document.querySelector('.gsap19 .blue')
            const pink = document.querySelector('.gsap19 .pink')
            const green = document.querySelector('.gsap19 .green')
            const quote = document.querySelector('.gsap19 .quote')

            gsap.set([green,quote],{y:120})

            gsap.defaults({
                duration:1
            })

            function animation(){
                const orangeAnimation = gsap.timeline()
                .to(orange,{scale:2})
                .to(orange,{rotation:360})
                .to(orange,{scale:1})
                
                
                const blueAnimation = gsap.timeline()
                .to(blue,{y:150})
                .to(blue,{rotation:360})
                .to(blue,{y:0})
                
                const pinkAnimation = gsap.timeline()
                .to(pink,{scale:0.5})
                .to(pink,{rotation:-360})
                .to(pink,{scale:1})

                return [orangeAnimation,blueAnimation,pinkAnimation]
            }

            // TextPlugin.js가 있어야 작동함
            const [orangeA,blueA,pinkA] = animation();
            function quoteAnimation(message){
                const tl = gsap.timeline()
                .set(quote,{text:message})
                .to([green,quote],{y:0,stagger:0.2,repeat:1,yoyo:true,repeatDelay:1});
                console.log(message)
                return tl 
            }

            // console.log(quoteAnimation('aa'))

            const master = gsap.timeline()
            .add(orangeA)
            .add(quoteAnimation('orange!'))
            .add(blueA)
            .add(quoteAnimation('blue!'))
            .add(pinkA)
            .add(quoteAnimation('pink!'))
         }
         gsap19();


         /* gsap20 */
         function gsap20() {
            gsap.to('.gsap20 .cursor',{
                opacity:0,
                repeat:-1,
                yoyo:true,
                duration:0.3,
                repeatDelay:0.4
            })

            const text = ['html','css','javascript','react','gsap'];

            function typing(arr){
                const tl = gsap.timeline()
                .to('.gsap20 .big',{
                    // duration: arr[0] === 'javascript' ? 0.9 : 0.3,
                    duration: 0.3,
                    text:arr[0],
                    repeat:1,
                    yoyo:true,
                    repeatDelay:1,
                })
                arr.push(arr.shift())
                gsap.delayedCall(3,typing,[arr])
            }

            typing(text)
         }
         gsap20();
    </script>











    <!-- 정리 전 -->
    <div>
        
        <div style="height:2000px"></div>

        <div class="bb" style="padding-top:0;">
            <div class="box box3">
                <p>box3</p>
            </div>
        </div>


        <div class="aa" style="padding-top:0;">
            <div class="box box1" style="margin:0;">box1</div>
            <div class="box">box</div>
        </div>

        <div class="box box2">box2</div>
        <div class="box box4">box4</div>
        <div class="box box4-end" style="margin-top:2000px">box4-end</div>

        <div class="pin"></div>
        <div style="height:2000px"></div>
        <script>
            const boxes = gsap.utils.toArray('.box1');
            boxes.forEach(box => {
                gsap.to(box, {
                    x: 100,
                    // xPercent: 10,
                    y: 200,
                    // rotation: 360,
                    duration: 1,
                    // animation: tween
                    scrollTrigger: {
                        // trigger: box, // 자기 자신
                        trigger: ".aa", // 부모요소 지정
                        start: 'center 50%', // 엘리먼트 영역, trigger 영역
                        end: 'bottom bottom', // 엘리먼트 영역, trigger 영역
                        // end: "+=400", // start 후 200px 이동 후 끝
                        scrub: true,
                        // markers: true,
                        pin: ".pin", // .pin-spacer 가 생성되는데 뭔지 아직 파악 안됨
                        // pin: true,
                        // onUpdate: (self) => console.log("direction:", self.direction),
                        // onToggle: (self) => console.log("toggled. active?", self.isActive),
                        animation: tl,
                    },
                    
                })

                // console.log(gsap);
            });


            let tl = gsap.timeline({
                // yes, we can add it to an entire timeline!
                scrollTrigger: {
                    trigger: ".bb",
                    pin: true, // pin the trigger element while active
                    start: "top 70%", // when the top of the trigger hits the top of the viewport
                    // end: "+=2000", // end after scrolling 500px beyond the start
                    end: "top 10%", // end after scrolling 500px beyond the start
                    scrub: 1, // smooth scrubbing, takes 1 second to "catch up" to the scrollbar
                    snap: {
                        snapTo: "labels", // snap to the closest label in the timeline
                        duration: { min: 0.2, max: 3 }, // the snap animation should be at least 0.2 seconds, but no more than 3 seconds (determined by velocity)
                        delay: 0.2, // wait 0.2 seconds from the last scroll event before doing the snapping
                        ease: "power1.inOut", // the ease of the snap animation ("power3" by default)
                    },
                    // onUpdate: (self) => console.log("direction:", self.direction),
                    // onToggle: (self) => console.log("toggled. active?", self.isActive),
                    markers: true,
                },
            });



            // console.log(tl.vars)

            // add animations and labels to the timeline
            tl.addLabel("start")
                .from(".box3 p", { scale: 0.3, rotation: 45, autoAlpha: 0 })
                .addLabel("color")
                .from(".box3", { backgroundColor: "#28a92b" })
                .addLabel("spin")
                .to(".box3", { rotation: 360 })
                .addLabel("end");



            ScrollTrigger.create({
                trigger: ".box4",
                start: "top top",
                endTrigger: ".box4-end",
                // end: "bottom 50%+=100px",
                end: "bottom top",
                // markers: true,
                // onToggle: (self) => console.log("toggled, isActive:", self.isActive),
                /* onUpdate: (self) => {
                    console.log(
                    "progress:",
                    self.progress.toFixed(3),
                    "direction:",
                    self.direction,
                    "velocity",
                    self.getVelocity()
                    );
                }, */
            });

        </script>
    </div>
    <!-- //정리 전 -->
</body>

</html>