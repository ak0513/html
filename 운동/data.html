<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <style>
        /* reset */
        *, *::before, *::after {box-sizing:border-box;}
        body,div,dl,dt,dd,ul,ol,li,h1,h2,h3,h4,h5,h6,pre,code,form,fieldset,legend,textarea,p,blockquote,th,td,input,select,textarea,button{margin:0;padding:0}
        fieldset,img{border:0 none}
        dl,ul,ol,menu,li {list-style:none}
        blockquote, q {quotes: none}
        blockquote:before, blockquote:after,q:before, q:after {content:'';content:none}
        input,select,textarea,button {vertical-align:middle;outline:none}
        input::-ms-clear {display:none}
        button {border:0 none;background-color:transparent;cursor:pointer}
        body,th,td,input,select,textarea,button {font-size:14px;line-height:1.5;font-family:-apple-system, BlinkMacSystemFont, Pretendard, "Segoe UI", Roboto, Oxygen-Sans, Ubuntu, Cantarell,'Noto Sans KR', 'Spoqa Han Sans', "Helvetica Neue", sans-serif;}
        a {color:#333;text-decoration:none} 
        a:active, a:hover {text-decoration:underline}
        a:active {background-color:transparent}
        address,caption,cite,code,dfn,em,var {font-style:normal;font-weight:normal}
        img {max-width:100%;height:auto;}
        
        html,body {height:100%;}
        body {-webkit-text-size-adjust:none;background-color:#f8f8f8;color:#111;}

        #wrap {padding:16px;}
        #container {margin-top:16px;}
        #btnTop {margin-bottom:8px;}
        #btnKindWrap {overflow-x:auto;padding-bottom:3px;}
        #btnKind {display:flex;gap:4px;white-space:nowrap;}
        button {padding:4px 12px;background-color:#fff;border-radius:4px;font-size:14px;color:#111;}
        #btnKind button {background-color:#f0f0f0;}

        h2 {margin-top:40px;font-weight:700;font-size:16px;}
        h2:first-child {margin-top:0;}
        h2 span {font-size:14px;font-weight:400;color:#666;margin-left:4px;}
        h3 {font-weight:700;}
        h3 span {font-size:14px;font-weight:400;color:#666;margin-left:4px;}
        .item {margin-top:8px;background-color:#fff;border-radius:4px;padding:12px 16px;border:1px solid #f0f0f0;}
        .item + .item {margin-top:8px;}
        .set {margin-top:8px;padding-top:8px;border-top:1px solid #eee;}
        .set > li + li {margin-top:4px;}
        .set-item {display:flex;}
        .set-item li {flex:1;color:#423f33;text-align:right;}
        .set-item li:first-child {text-align: left;}
        .set-item li small {color:#999;}

        .link {display:flex;gap:8px;margin-top:12px;}
        .link a {text-decoration:underline;}

        .desc {color:#666;margin-top:4px;}
    </style>
</head>
<body>
    <div id="wrap">
        <div id="btnTop">
            <button type="button" onclick="sortData('date')">날짜</button>
            <button type="button" onclick="sortData('kind')">종류</button>
        </div>
        <div id="btnKindWrap">
            <div id="btnKind"></div>
        </div>
        <div id="container"></div>
    </div>
    <script>
        var data = [
            {date:'2024.06.24', part:'어깨', kind:'밀리터리 프레스', set:[{weight:'9.5', number:'20'},{weight:'9.5', number:'20'},{weight:'9.5', number:'20'},]},
            {date:'2024.06.24', part:'어깨', kind:'인클라인 덤벨 숄더 프레스', set:[{weight:'3', number:'20'},{weight:'1.5', number:'20'},{weight:'1.5', number:'20'},]},
            {date:'2024.06.24', part:'어깨', kind:'사이드 레터럴 레이즈', set:[{weight:'3', number:'20'},{weight:'3', number:'20'},{weight:'3', number:'20'},]},
            {date:'2024.06.24', part:'등', kind:'벤트 오버 레터럴 레이즈', set:[{weight:'3', number:'20'},{weight:'3', number:'20'},{weight:'3', number:'20'},]},
            {date:'2024.06.24', part:'하체', kind:'레그 프레스', set:[{weight:'0', number:'20'},{weight:'20', number:'20'},{weight:'20', number:'20'},{weight:'20', number:'20'},]},
            {date:'2024.06.24', part:'코어', kind:'버피', set:[{weight:'0', number:'20'},{weight:'0', number:'20'},{weight:'0', number:'20'},{weight:'0', number:'20'},]},

            {date:'2024.06.20', part:'가슴', kind:'벤치 프레스', set:[{weight:'15', number:'20'},{weight:'15', number:'20'},{weight:'20', number:'15'},{weight:'20', number:'15'},]},
            {date:'2024.06.20', part:'가슴', kind:'인클라인 덤벨 체스트 프레스', set:[{weight:'4', number:'20'},{weight:'5', number:'20'},{weight:'6', number:'20'},]},
            {date:'2024.06.20', part:'가슴', kind:'딥스', set:[{weight:'0', number:'20'},{weight:'0', number:'20'},{weight:'0', number:'20'},]},
            {date:'2024.06.20', part:'등', kind:'랫 풀 다운', set:[{weight:'20', number:'20'},{weight:'25', number:'20'},{weight:'30', number:'15'},]},
            {date:'2024.06.20', part:'등', kind:'바벨 벤트 오버 로우', set:[{weight:'15', number:'20'},{weight:'15', number:'20'},{weight:'9.5', number:'20'},]},
            {date:'2024.06.20', part:'코어', kind:'마운틴 클라이머', set:[{weight:'0', number:'20'}],desc:'30초씩 3세트 추가'},

            {date:'2024.06.17', part:'하체', kind:'스쿼트', set:[{weight:'20', number:'20'},{weight:'25', number:'15'},{weight:'30', number:'12'},{weight:'35', number:'10'},]},
            {date:'2024.06.17', part:'하체', kind:'스플릿 스쿼트', set:[{weight:'0', number:'20'},{weight:'0', number:'20'},{weight:'0', number:'20'}],desc:'5초 버티기'},
            {date:'2024.06.17', part:'하체', kind:'힙 스터스트', set:[{weight:'0', number:'20'},{weight:'0', number:'20'},{weight:'0', number:'20'},],desc:'밴드 끼고'},
            {date:'2024.06.17', part:'어깨', kind:'사이드 레터럴 레이즈', set:[{weight:'1.5', number:'20'},{weight:'3', number:'20'}]},
            {date:'2024.06.17', part:'어깨', kind:'써클 레이즈', set:[{weight:'1', number:'20'},{weight:'1', number:'20'}]},

            {date:'2024.06.13', part:'등', kind:'데드 리프트', set:[{weight:'20', number:'20'},{weight:'20', number:'20'},{weight:'20', number:'20'},], desc:'루마니안 데드 리프트'},
            {date:'2024.06.13', part:'등', kind:'랫 풀 다운', set:[{weight:'20', number:'20'},{weight:'30', number:'20'},{weight:'35', number:'15'},]},
            {date:'2024.06.13', part:'등', kind:'케이블 로우', set:[{weight:'20', number:'20'},{weight:'25', number:'20'},{weight:'30', number:'20'},]},
            {date:'2024.06.13', part:'가슴', kind:'벤치 프레스', set:[{weight:'20', number:'20'},{weight:'20', number:'20'},{weight:'20', number:'20'},]},
            {date:'2024.06.13', part:'가슴', kind:'딥스', set:[{weight:'0', number:'20'},{weight:'0', number:'15'}]},

            {date:'2024.06.10', part:'코어', kind:'힙 브릿지', set:[{weight:'0', number:'20'},{weight:'0', number:'20'},{weight:'0', number:'20'},], desc:'10초 버티기'},
            {date:'2024.06.10', part:'하체', kind:'스쿼트', set:[{weight:'20', number:'20'},{weight:'25', number:'20'},{weight:'30', number:'20'},{weight:'0', number:'20'},]},
            {date:'2024.06.10', part:'하체', kind:'레그 컬', set:[{weight:'8', number:'20'},{weight:'12', number:'20'},{weight:'16', number:'20'},]},
            {date:'2024.06.10', part:'어깨', kind:'밀리터리 프레스', set:[{weight:'9.5', number:'20'},{weight:'9.5', number:'20'},{weight:'9.5', number:'20'},]},
            {date:'2024.06.10', part:'어깨', kind:'인클라인 덤벨 숄더 프레스', set:[{weight:'3', number:'12'},{weight:'3', number:'12'}]},
            {date:'2024.06.10', part:'어깨', kind:'사이드 레터럴 레이즈', set:[{weight:'1.5', number:'20'},{weight:'1.5', number:'20'},{weight:'1.5', number:'20'},]},

            {date:'2024.06.07', part:'등', kind:'랫 풀 다운', set:[{ weight:'20', number:'20'},{weight:'25', number:'20'},{weight:'30', number:'20'},]},
            {date:'2024.06.07', part:'가슴', kind:'벤치 프레스', set:[{weight:'15', number:'20'},{weight:'20', number:'20'},{weight:'20', number:'20'},]},
            {date:'2024.06.07', part:'등', kind:'티 바 로우', set:[{weight:'0', number:'20'},{weight:'5', number:'20'},{weight:'5', number:'20'},{weight:'5', number:'20'},]},
            {date:'2024.06.07', part:'가슴', kind:'인클라인 덤벨 체스트 프레스', set:[{weight:'5', number:'20'},{ weight:'5', number:'20',},{ weight:'5', number:'20',},]},
            {date:'2024.06.07', part:'등', kind:'백 익스텐션', set:[{weight:'0', number:'15'},{weight:'0', number:'15'},{weight:'0', number:'15'},],desc:'5초 버티기'},
            
            {date:'2024.06.04', part:'하체', kind:'스쿼트', set:[{number:'20', weight:'15'},{number:'20', weight:'20'},]},
            {date:'2024.06.04', part:'하체', kind:'레그 프레스', set:[{weight:'0', number:'20'},{weight:'0', number:'20'},{ weight:'0', number:'20',},],desc:'5초 버티기'},
            {date:'2024.06.04', part:'어깨', kind:'밀리터리 프레스', set:[{weight:'9', number:'20'},{weight:'9', number:'20'},{weight:'9', number:'20'},]},
            {date:'2024.06.04', part:'어깨', kind:'사이드 레터럴 레이즈', set:[{weight:'1', number:'20'},{weight:'1.5', number:'20'},]},
        ]

        var buttonContainer = document.getElementById('btnKind');
        var container = document.getElementById('container');

        // 데이터를 정렬하고 DOM에 추가하는 함수
        function sortData(criterion) {
            if (criterion === 'kind') {
                var kindCounts = data.reduce((acc, item) => {
                    acc[item.kind] = (acc[item.kind] || 0) + 1;
                    return acc;
                }, {});

                // kind별로 버튼 생성
                var kinds = Object.keys(kindCounts).sort((a, b) => kindCounts[b] - kindCounts[a]);

                buttonContainer.innerHTML = '';
                kinds.forEach(kind => {
                    var button = document.createElement('button');
                    button.setAttribute('type', 'button');
                    button.textContent = `${kind}(${kindCounts[kind]})`; // Optional: show count next to kind
                    button.onclick = function() { showKind(kind); };
                    buttonContainer.appendChild(button);
                });

                // 처음에 모든 kind 데이터를 보여줌
                showAllKinds();
            } else {
                var groupedData = data.reduce((acc, item) => {
                    var key = item[criterion];
                    if (!acc[key]) {
                        acc[key] = [];
                    }
                    acc[key].push(item);
                    return acc;
                }, {});

                container.innerHTML = '';
                if (criterion === 'date') {
                    buttonContainer.innerHTML = '';
                }

                var sortedKeys = Object.keys(groupedData).sort((a, b) => {
                    if (criterion === 'date') {
                        return new Date(b) - new Date(a);// 날짜별 내림차순 정렬
                    } else {
                        return a.localeCompare(b);
                    }
                });

                // 정렬된 키를 순회하며 데이터를 DOM에 추가
                sortedKeys.forEach(key => {
                    setTitle(key);
                    groupedData[key].forEach(item => {
                        setKind(item, criterion);
                    });
                });
            }
        }

        // 모든 kind의 데이터를 표시하는 함수
        function showAllKinds() {
            container.innerHTML = '';
            var groupedData = data.reduce((acc, item) => {
                var key = item.kind;
                if (!acc[key]) {
                    acc[key] = [];
                }
                acc[key].push(item);
                return acc;
            }, {});

            Object.keys(groupedData).forEach(kind => {
                setTitle(kind, groupedData[kind][0].part);

                groupedData[kind].forEach(item => {
                    setKind(item);
                });
            });
        }

        // 특정 kind의 데이터를 표시하는 함수
        function showKind(kind) {
            var kindData = data.filter(item => item.kind === kind);
            container.innerHTML = '';
            setTitle(kind, kindData[0].part);

            kindData.forEach(item => {
                setKind(item);
            });
        }

        // 타이틀 세팅
        function setTitle(text, part) {
            var title = document.createElement('h2');
            if (part === undefined) { part = ''; }
            title.innerHTML = `${text}<span>${part}</span>`;
            container.appendChild(title);
        }

        // 종류별 세팅
        function setKind(item, criterion) {
            var itemDiv = document.createElement('div');
            itemDiv.classList.add('item');
            itemDiv.innerHTML = `${criterion === 'date' ? `<h3>${item.kind}<span>${item.part}</span></h3>` : `<h3>${item.date}</h3>`} ${item.desc === undefined ? `` : `<div class="desc">${item.desc}</div>`}`;

            var setList = document.createElement('ul');
            setList.classList.add('set');
            item.set.forEach(function(setItem, index) {
                var listItem = document.createElement('li');
                listItem.innerHTML = `<ul class="set-item"><li>${index + 1}세트</li>${setItem.weight > 0 ? `<li>${setItem.weight}<small>kg</small></li>` : ''}<li>${setItem.number}<small>회</small></li>`;
                setList.appendChild(listItem);
            });

            itemDiv.appendChild(setList);
            container.appendChild(itemDiv);
        }

        // 페이지 로드 시 날짜 정렬 디폴트
        sortData('date');
    </script>
</body>
</html>
