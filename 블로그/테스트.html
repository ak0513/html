<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Scroll Effect</title>
<style>
  .container {
    position: relative;
  }
  .box {
    background-color: lightblue;
    margin-bottom: 10px;
  }
  #A {
    background-color: lightgreen;
    width: 100%;
    transition: top 0.3s;
  }
  #B {
    background-color: lightcoral;
    margin-top: 20px;
  }
  .fixed {
    position: fixed;
    top: 0;
  }
</style>
</head>
<body>

<div class="container">
  <div class="box" id="box1" style="height:300px"></div>
  <div class="box" id="box2" style="height:300px"></div>
  <div class="buttons" id="A">
    <button>Button</button>
  </div>
  <div class="sections" id="B" style="height:2000px"></div>
  <div style="height:4000px"></div>
</div>

<script>
window.onload = function() {
  var buttons = document.getElementById('A');
  var sections = document.getElementById('B');
  var buttonsHeight = buttons.offsetHeight;
  var sectionsHeight = sections.offsetHeight;

  window.addEventListener('scroll', function() {
    var scroll = window.scrollY || window.pageYOffset;

    // If scrolled past buttons, fix them to the top
    if (scroll >= buttons.offsetTop && !buttons.classList.contains('fixed')) {
      buttons.classList.add('fixed');
    } else if (scroll < buttons.offsetTop && buttons.classList.contains('fixed')) {
      buttons.classList.remove('fixed');
    }

    // If buttons are fixed and scrolled up to their original position, unfix them
    if (buttons.classList.contains('fixed') && scroll < buttonsHeight) {
      buttons.classList.remove('fixed');
    }

    // If buttons are fixed and scrolled down to the end of sections, unfix them
    if (buttons.classList.contains('fixed') && scroll > sectionsHeight + sections.offsetTop - window.innerHeight) {
      buttons.classList.remove('fixed');
    }
  });
};
</script>

</body>
</html>
